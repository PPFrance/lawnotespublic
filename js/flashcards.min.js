(function(){function Wb(a){return function(b,d){var c;c=[];substrRegex=new RegExp(b,"i");$.each(a,function(a,b){substrRegex.test(b)&&c.push(b)});d(c)}}var T,U,ja,ka,la,ya,za;function Aa(){}function Sa(){if(!aa&&0!=k){var a="#outer-container-"+f[k],b=Math.floor(1.2*ba);$(a).velocity({translateX:""+b+"px"},{duration:250,queue:!1});aa=!0;setTimeout(Ta,250,a);--k;a="#outer-container-"+f[k];localStorage.setItem(subject+"-tos",k);q=!1;r?K(f[k],L?"back":"front",".test-answer, .case-name, .details-held"):
K(f[k],L?"back":"front",".case-name-container,  .intro-special");D();0<=M&&(b=f[M],null!=document.getElementById("outer-container-"+b)?console.log("drawNewCardAtBottomOfStack - tried to add an element already in the dom"):($(G[b].html).appendTo("#page").hide().velocity("fadeIn",2E3),$("#flip-"+b+" .fcard").css("background-color","#"+G[b].colour),$("#flip-"+b+" .fcard").css("opacity","0.985"),null!=z&&("ffb"==z&&$("#flip-"+b+" .test-answer").click(Ua),"bff"==z&&$("#flip-"+b+" .test-answer").click(Va),
"cnt"==z&&$("#flip-"+b+" .cnt-case-input").keyup(Wa)),Ba("#back-"+b)),--M);"string"==typeof f[k]&&f[k].startsWith("results-")&&(Xb(),$(a).velocity("fadeIn",1500))}}function Ta(a){$(a).remove();aa=!1}function K(a,b,d){var c=16;Xa&&(c+=7);var e="#back-"+a;if(0!=$(e).length){a=null==b?"#back-"+a:"#"+b+"-"+a;b=$(a)[0].scrollHeight;var f=$(a).innerHeight();d=null==d?".details-facts, .details-held":d;if(b>f){Aa($(a).find(d));for(var g=0,h=200;b+0>f&&50>g&&h>c;)$(a).find(d).each(function(){var a=parseInt($(this).css("font-size"));
--a;a<h&&(h=a);$(this).css("font-size",""+a+"px")}),b=$(a)[0].scrollHeight,g+=1;b+0>f&&($(a).css("overflow-y","scroll"),$(a).css("display","block"),$(a).scrollTop(0),$(a).append('<div class="details-facts">&nbsp;<br>&nbsp;</div>'));$(e).css("display","block")}else Ya&&$(a).css("justify-content","space-around")}}function Za(){ca=!1;var a="#outer-container-"+f[k];$(a).velocity("stop").velocity({translateX:0,translateY:0,translateZ:0,opacity:1},{duration:700,easing:"spring"});$(a).css("cursor","default");
0!=k&&Ca(f[k-1],!1);D();ma()}function Yb(a){a.stopPropagation();var b=a.target.textContent.toLowerCase().woPunct();if(null!=N[b]){a=$("#outer-container-"+f[k]).css("z-index");var b=parseInt(N[b]),d=f.indexOf(b);if(-1==f.indexOf(b))b in G||(G[b]=$a(b,k+1,!0,L,E[b],$("#neat-cards-control").is(":checked"),null)),k+=1,f.splice(k,0,b),Da(parseInt(a)+1,!0);else{var c="#outer-container-"+b;f.splice(f.indexOf(b),1);f.splice(k,0,b);0<$(c).length?$(c).css("z-index",parseInt(a)+1):(d=-1,Da(parseInt(a)+1,!0))}Ea();
q=!1;c="#outer-container-"+f[k];ca=!0;$(c+" .front").click(function(){Za()});$(c+" .back").click(function(){Za()});$(c).css("cursor","pointer");D();Zb(c,d);setTimeout(R,300)}}function V(a,b,d,c){d&&($("#tokenizer").tokenize().clear(),$("#tokenizer").tokenize().resetSearchInput());$("#tokenizer").tokenize().tokenAdd(b+": "+a);localStorage.setItem(subject+"-searchtokens",JSON.stringify($("#tokenizer").tokenize().toArray()));c&&(na(),p())}function $b(a){a.stopPropagation();V(a.target.textContent,"Category",
!0,!0)}function ac(a){a.stopPropagation();V(a.target.textContent,"Type",!0,!0)}function bc(a){a=encodeURI("http://www.google.co.uk?q="+a.target.textContent);window.open(a,"_blank")}function cc(){var a=decodeURI($(this).attr("data-ln"));window.open(a,"_blank")}function dc(){var a=encodeURI($(this).attr("data-ln"));ab(a)}function ec(a){a=encodeURI(a.target.textContent);ab('"'+a+'"')}function ab(a){a="http://login.westlaw.co.uk/maf/wluk/app/search/run?ao=&ndd=&sttype=stdtemplate&srguid=&context=19&crumb-action=append&crumb-label=Search+Results&sortid=order-by-element-relevance&journal_ds=uk-journals-idsall&frt="+
encodeURIComponent(a)+"&buttonSearch=Search&ds1=uk-topics&ds2=uk-cases-all&ds3=uk-leg-today&ds4=uk-journals-all&ds5=ukca&ds6=uk-eu-all&searchtype=fulltext";window.open(a,"_blank")}function bb(a){L?($("#front-"+a).html(cb(a,E[a])),K(a,"front")):($("#back-"+a).html(db(a,E[a])),K(a),$(".fcard .caseln, .fcard .catln, .fcard .typln, .fcard .gsln, .fcard .arb, .fcard .wls, .fcard .wlc").unbind("click"),$(".fcard .caseln").click(Yb),$(".fcard .catln").click($b),$(".fcard .typln").click(ac),$(".fcard .gsln").click(bc),
$(".fcard .wls").click(dc),$(".fcard .wlc").click(ec),$(".fcard .arb").click(cc))}function Ea(){var a=f[k];bb(a);Fa(a,E[a])}function Ga(){r&&K(f[k]);var a=k;$("#top")[0].scrollHeight;a="#flip-"+f[a];if(q)$(a).velocity({rotateY:"0deg"},{duration:eb}),q=!1;else{if(!r){var b=k-1;0<=b&&(b=f[b],bb(b),Fa(b,E[b]))}$(a).velocity({rotateY:"180deg"},{duration:eb});q=!0}D();q&&r&&fc()}function R(a){q?Sa():(Ga(),a&&Sa());(!r||r&&q)&&ma();r&&!q&&setTimeout(function(a){$("#front-"+a+" .test-answer-table td span").removeClass("blurry-text")},
1E3*Ha,f[k])}function Ia(a){if(q)Ga();else{if(!aa){var b=parseInt($("#outer-container-"+f[k]).css("z-index"));if(!(k>=f.length-1)){k+=1;localStorage.setItem(subject+"-tos",k);if(k+1-M>da){M+=1;var d="#outer-container-"+f[M];aa=!0;$(d).velocity("fadeOut",500);setTimeout(Ta,500,d)}Da(b+1,!0);b="#outer-container-"+f[k];$(b).css("opacity",0);$("#flip-"+f[k]).velocity({rotateY:"180deg"},{duration:0});d=Math.floor(1.2*ba);$(b).velocity({translateX:""+d+"px"},{duration:0});$(b).velocity({translateX:"0px",
opacity:1},{duration:175});D()}}a&&Ga()}(!r||r&&q)&&ma()}function fb(a){var b=localStorage.getItem(oa);null!=b?(a=null!=a&&a?H:$.extend({},JSON.parse(b),H),localStorage.setItem(oa,JSON.stringify(a))):localStorage.setItem(oa,JSON.stringify(H))}function I(a){for(var b=a.length,d,c;0!==b;)c=Math.floor(Math.random()*b),--b,d=a[b],a[b]=a[c],a[c]=d;return a}function pa(a){var b="";if(null!=a)for(var d=0;d<a.length;d++){var c="fl flags-card-flag flag-"+a[d].toLowerCase(),e="color: "+gb[a[d]]+";";2==a[d].length&&
(c+=" flag-icon-background flag-icon-"+a[d].toLowerCase(),e="color: rgba(0,0,0,0);");b+="<div class='"+c+"' style='"+e+"' draggable='true'>"+a[d]+"</div>"}return b}function Ja(){t=[];gc();var a=hb,b=ib();hc.forEach(function(c){t.push(c);-1<a.indexOf(c)&&a.splice(a.indexOf(c),1);-1<b.indexOf(c)&&b.splice(b.indexOf(c),1)});for(t=t.concat(a).concat(b);X.length<t.length;)X=X.concat(I(X));for(var d=0,c=0;c<t.length;c++)2!=t[d].length&&(gb[t[c]]=X[d],d++)}function ib(){var a=[];null!=localStorage.getItem(S)&&
(a=JSON.parse(localStorage.getItem(S)));return a}function jb(a){var b=[];null!=localStorage.getItem(S)&&(b=JSON.parse(localStorage.getItem(S)));-1<b.indexOf(a)||-1<t.indexOf(a)||(b.push(a),$("#tokenizer").tokenize().tokenAdd("Tagged: "+a,"Tagged: "+a),localStorage.setItem(S,JSON.stringify(b)),Ja());return b}function gc(){localStorage.getItem(J);for(var a=null==localStorage.getItem(J)?{}:JSON.parse(localStorage.getItem(J)),b=0;b<cardsLen;b++)null==h[b].FLAGS||h[b].NUMBER in a||(a[h[b].NUMBER]=h[b].FLAGS);
localStorage.setItem(J,JSON.stringify(a))}function Fa(a,b){$("#back-flags-"+a).html(pa(b));$("#front-flags-"+a).html(pa(b));kb(a)}function cb(a,b){var d;d=""+lb(a,!0);d+="<div class='case-name-container'>";var c=h[a];if(!c)return"";if(mb&&null!=c.CASENUM)d+="<span class='case-name-name'>"+c.CASENUM+" </span>";else if(Ka&&null!=c.CITATION)null!=c.CASENUM&&(d+="<span class='case-num'>"+c.CASENUM+" </span>"),d+="<span class='case-name-name'>"+c.CITATION+"</span>";else{null!=c.CASENUM&&(d+="<span class='case-num'>"+
c.CASENUM+" </span>");if(null!=c.NAME){var e=c.NAME.startsWith("(wl) ")?c.NAME.substr(5):c.NAME;d+="<span class='case-name-name'>"+e+"</span>"}null!=c.YEAR&&(d+="<span class='case-name-year'> ["+c.YEAR+"]</span>");null!=c.COURT&&(d+="<span class='case-name-court'> "+c.COURT+"</span>")}d+="</div>";if(null!=c.TYPE&&"Help"==c.TYPE||nb&&null!=c.CATEGORY)d+="<div class='details-title'><span>"+c.CATEGORY+"</span></div>";null!=c.SPECIAL&&(d+="<div class='intro-special'><span>"+c.SPECIAL+"</span></div>");
null!=c.TYPE&&"Case"!=c.TYPE&&"Headnotes"!=c.TYPE&&(d+="<div class='card-type'>"+c.TYPE+"</div>");null!=c.TYPE&&"Headnotes"==c.TYPE&&(d+="<div class='card-type'>Headnotes &mdash; &copy; Westlaw</div>");return d+="<div class='flags-card' id='front-flags-"+a+"'>"+pa(b)+"</div>"}function ob(a,b,d){var c="<div class='"+b+" fcard' id='front-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >";"front"==b&&(c+=cb(a,d));return c+"</div>"}function pb(a,b,d){var c=[];Y=
I(Y);$("#test-only-related").is(":checked")&&null!=h[d].RELATED?(c=h[d].RELATED,c=I(c),c=c.slice(0,a)):c=Y.slice(0,a);-1==c.indexOf(b)&&(c[Math.floor(Math.random()*c.length)]=b);return c}function La(a,b,d){qa[a]={answer:d};-1<C.indexOf(a)&&C.splice(C.indexOf(a),1);ea.push(!1)}function na(){C=[];qa={};ea=[];r=!1;z=""}function ic(){var a=subject+"-tests-"+z,b=localStorage.getItem(a),b=null==b?[]:JSON.parse(b),d=new Date,d=""+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDay()+" "+d.getHours()+":"+d.getMinutes(),
c={};c[d]={score:C.length,numCards:f.length,correct:C,incorrect:qa,tokens:localStorage.getItem(subject+"-searchtokens")};b.push(c);localStorage.setItem(a,JSON.stringify(b))}function Ua(a){if($(this).hasClass("blurry-text"))$(this).removeClass("blurry-text");else{var b=$(a.target).closest("table").data("correct"),d=a.target.textContent;null!=b&&null!=d&&(d==b?(C.push(a.target.dataset.cardnum),ea.push(!0),$("#back-"+a.target.dataset.cardnum+" .label-wrong").hide()):($("#back-"+a.target.dataset.cardnum+
" .label-correct").hide(),La(a.target.dataset.cardnum,d,b)),R())}}function Va(a){if($(this).hasClass("blurry-text"))$(this).removeClass("blurry-text");else{var b=$(a.target).closest("table").data("correct"),d=a.target.dataset.cardname;null!=b&&null!=d&&(d==b?(C.push(a.target.dataset.cardnum),ea.push(!0),$("#back-"+a.target.dataset.cardnum+" .label-wrong").hide()):($("#back-"+a.target.dataset.cardnum+" .label-correct").hide(),La(a.target.dataset.cardnum,d,b)),R())}}function Wa(a){if(13==(a.keyCode||
a.which)){if(0<=k&&k<f.length&&f[k]in h&&"NAME"in h[f[k]]){for(var b=1<$("#front-"+f[k]+" .cnt-case-input").length?$($("#front-"+f[k]+" .cnt-case-input")[1]).val():$("#front-"+f[k]+" .cnt-case-input").val(),d=f[k],c=h[f[k]].NAME,e=b.toLowerCase().split(/[', ]/),F=c.toLowerCase().split(/[', ]/),g="v re r ex p s".split(" "),x=0;x<g;x++)-1<e.indexOf(g[x])&&e.splice(e.indexOf(g[x]),1),-1<F.indexOf(g[x])&&F.splice(F.indexOf(g[x]),1);var u=!1;if(1==e.length)if(1==F.length)u=.9<=e[0].distance(F[0]);else{if(1<
F.length){for(x=u=0;x<F.length;x++)g=e[0].distance(F[x]),g>u&&(u=g);u=.95<=u}}else if(1<e.length){for(var u=!1,l=[],r=0,x=0;x<e.length;x++){for(var p=!1,q=0;q<F.length;q++)if(!(-1<l.indexOf(q))&&(g=e[x].distance(F[q]),.93<=g)){p=!0;r+=1;l.push(q);break}p||(u=!1)}.65<r/e.length*1&&(u=!0)}u?($("#back-"+d+" .label-wrong").hide(),C.push(d),ea.push(!0)):($("#back-"+d+" .label-correct").hide(),La(d,b,c),$("#back-"+d+" .label-wrong").append('<br>You said &mdash; <span class="it bd">'+b+"</span>"))}a.preventDefault();
R()}}function db(a,b){if(null!=h){var d=h[a],c="";qb&&(c+=lb(a,!1));if(rb||"Case"!=d.TYPE){var c=c+"<div class='case-name-container'><div class='case-name'>",d=h[a];if(!d)return"";sb&&null!=d.CASENUM?c+="<span class='case-name-name'>"+d.CASENUM+" </span>":Ka&&null!=d.CITATION?c+="<span class='case-name-name'>"+d.CITATION+"</span>":(null!=d.NAME&&(c+="<span class='case-name-name'>"+d.NAME+"</span>"),null!=d.YEAR&&(c+="<span class='case-name-year'> ["+d.YEAR+"]</span>"),null!=d.COURT&&(c+="<span class='case-name-court'> "+
d.COURT+"</span>"));c+="</div></div>"}tb&&null!=d.CATEGORY&&"Case Overviews"!=d.TYPE&&(c+="<div class='details-title'><span>"+d.CATEGORY+"</span></div>");if((fa||"Case"!=d.TYPE)&&null!=d.SUMMARY&&0<d.SUMMARY.length){for(var c=c+"<div class='details-facts'>",e=0;e<d.SUMMARY.length;e++)c=d.SUMMARY[e].startsWith("<ol>")||d.SUMMARY[e].startsWith("<ul>")?c+d.SUMMARY[e]:c+("<p>"+d.SUMMARY[e]+"</p>");c+="</div>"}if(fa&&null!=d.ABSTRACT&&0<d.ABSTRACT.length){c+="<div class='details-facts'><p><span class='bd'>Abstract</span> &mdash; "+
d.ABSTRACT[0]+"</p>";for(e=1;e<d.ABSTRACT.length;e++)c=d.ABSTRACT[e].startsWith("<ol>")||d.ABSTRACT[e].startsWith("<ul>")?c+d.ABSTRACT[e]:c+("<p>"+d.ABSTRACT[e]+"</p>");c+="</div>"}if(null!=d.HELD&&0<d.HELD.length){c+="<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+d.HELD[0]+"</p>";if(!ub)for(e=1;e<d.HELD.length;e++)c=d.HELD[e].startsWith("<ol>")||d.HELD[e].startsWith("<ul>")?c+d.HELD[e]:c+("<p>"+d.HELD[e]+"</p>");c+="</div>"}fa&&null!=d.COMMENT&&(c+="<div class='details-held'><span class='bd'>Comment</span> &mdash; "+
d.COMMENT+"</div>");fa&&null!=d.TRIVIA&&(c+="<div class='details-trivia'><span class='bd'>Trivia</span> &mdash; "+d.TRIVIA+"</div>");return c+="<div class='flags-card' id='back-flags-"+a+"'>"+pa(b)+"</div>"}}function vb(a,b,d){var c="<div class='"+b+" fcard' id='back-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >";"front"==b&&(c+=db(a,d));return c+"</div>"}function ra(){var a=0<$(".flag-tray").length,b=ib(),d="";a?$(".flag-tray").html():($(".flag-tray").remove(),
d="<div class='browser-default flag-tray'>");for(var d=d+"<div class='flag-tray-title'>Tags</div> ",c=0;c<t.length;c++){var e="flag-tray-flag fl flag-"+t[c].toLowerCase(),f="color: "+X[c]+";";2==t[c].length&&(e+=" flag-icon-background flag-icon-"+t[c].toLowerCase(),f="color: rgba(0, 0, 0, 0); width: 1em !important;");var g=-1<b.indexOf(t[c]),e=e+(g?" fl-user":" fl-preset"),d=d+("<span class='"+e+"' data-flagname='"+t[c]+"' style='"+f+"' draggable='true'>"+t[c]+(g?"<a class='Close'>\u00d7</a>":"")+
"</span>")}d+="<span class='flag-tray-flag fl fl-editable'>&nbsp;<input type='fledit' class='fl-edit' placeholder='Type...'></input></span>";a?$(".flag-tray").html(d):(d+="</div>",$("main").append(d));$(".flag-tray").unbind("click");$(".flag-tray").click(function(a){a.stopPropagation();$(".flag-tray").toggleClass("ft-pinned")});a=document.querySelectorAll(".flag-tray-flag");[].forEach.call(a,function(a){a.addEventListener("dragstart",function(a){a.dataTransfer.setData("text/html",$(this).attr("data-flagname"))})});
$(".fl-edit").keypress(function(){13==event.keyCode&&(v=$(".fl-edit").val(),null!=v&&""!=v&&(jb(v),ra()))});$(".fl-user .Close").click(function(a){a=a.target.childNodes[0].textContent;if(confirm("Really remove this tag? Doing so will also remove it from any cards you might have attached it to.")){var b=[];null!=localStorage.getItem(S)&&(b=JSON.parse(localStorage.getItem(S)));-1!=b.indexOf(a)&&-1<t.indexOf(a)&&-1<b.indexOf(a)&&(b.splice(b.indexOf(a),1),localStorage.setItem(S,JSON.stringify(b)),Ja());
ra()}})}function jc(a){a.dataTransfer.setData("text/html",this.innerHTML)}function kb(a){a=document.querySelectorAll((null==a?"":"#card-container-"+a+" ")+".flags-card-flag");[].forEach.call(a,function(a){a.addEventListener("dragstart",jc)})}function fc(){$("#outer-container-"+f[k]+" .back").click(function(){R()})}function kc(a){var b=$(a.target).closest(".card-container"),d=0<b.length||"card-container"==$(a.target).attr("class-name"),c=a.dataTransfer.getData("text/html");$(O).removeClass("drop-target");
0<$(a.target).closest(".Tokenize").length&&null!=c&&""!=c?$("#tokenizer").tokenize().tokenAdd("Tagged: "+c):null!=c&&""!=c&&(d?(b.attr("id"),b=wb(f[k],a.dataTransfer.getData("text/html"))):(b=f[k],d=a.dataTransfer.getData("text/html"),c=localStorage.getItem(J),c=null==c?{}:JSON.parse(c),null!=c[b]&&-1<c[b].indexOf(d)&&(1==c[b].length?delete c[b]:c[b].splice(c[b].indexOf(d),1)),E=c,localStorage.setItem(J,JSON.stringify(c)),b=c[b]),Fa(f[k],b),a.dataTransfer.getData("text/html"));a.preventDefault()}
function lc(a){if(!sa){var b=O;O="";var d=$(a.target).closest(".fcard");0<$(a.target).closest(".TokensContainer").length?O=".TokensContainer":0<d.length&&(d.attr("id")=="front-"+f[k]||d.attr("id")=="back-"+f[k])&&(O="#"+d.attr("id"));b!=O&&$(b).hasClass("drop-target")&&$(b).removeClass("drop-target");""!=O&&(sa=!0,$(O).addClass("drop-target"),setTimeout(function(){sa=!1},200))}a.preventDefault()}function mc(){var a=document.querySelector("body");ga(a,"dragstart",function(){sa=!1;O=""});ga(a,"dragover",
lc);ga(a,"drop",kc,!1)}function xb(){(nc=$("#serif-font-control").is(":checked"))?$("#page").addClass("serif"):$("#page").removeClass("serif")}function Ma(a,b,d,c,e,F){Ka=$("#citations-control").is(":checked");ub=$("#browsing-show-shortheld").is(":checked");fa=$("#browsing-show-facts").is(":checked");rb=$("#browsing-show-name-on-back").is(":checked");mb=$("#front-panos-mode").is(":checked");sb=$("#back-panos-mode").is(":checked");nb=$("#front-categories-control").is(":checked");tb=$("#back-categories-control").is(":checked");
Ya=$("#spread-control").is(":checked");Xa=$("#larger-font-control").is(":checked");qb=$("#back-links-control").is(":checked");P=parseInt($("#messiness-control").val());Na=$("#card-order-select").val();yb=$("#westlaw-control").is(":checked");zb=$("#googschol-control").is(":checked");$("#articles-westlaw-control").is(":checked");$("#carran-mode-control").is(":checked");$("#claire-mode-control").is(":checked");b=localStorage.getItem(oa);null!=b&&(H=JSON.parse(b));B=I(B);$("#page").html("");xb();k=e;
q=!1;L=d;E=ta();b=[];for(var g=[],x=[],u=[],l=[],p=[],t=!1,z=!1,y=!1,m=0;m<a.length;m++)a[m].startsWith("Tagged: ")?b.push(a[m].replace("Tagged: ","")):a[m].startsWith("Type: ")?g.push(a[m].replace("Type: ","")):a[m].startsWith("Court: ")?x.push(a[m].replace("Court: ","")):a[m].startsWith("Category: ")?(u.push(a[m].replace("Category: ","")),y=!0):a[m].startsWith("(No ignored cards)")?z=!0:(y=a[m].match(/^Case: |^Concept: |^Statute: |^Headnotes: |^Exam Advice: |^Case Overviews: |^Table of Contents: |^Treaty: |^Treaty Article: |^Reading: |^Regulation: |^Directive: /))?
(y[0].replace(": ","").toUpperCase(),l.push([a[m].replace(y,""),y[0].replace(": ","")]),y=!0):(y=t=!0,p.push(a[m].toLowerCase()));if(!(-1<e)){f=[];for(var C=e=!1,m=h.length-1;0<=m;m--)if(cardMatchesFullText=C=e=!1,!(null!=F&&null!=h[m].TYPE&&"Help"==h[m].TYPE||z&&null!=D&&-1<D.indexOf("Ignore"))){if(0<l.length){var w=!1;for(a=0;a<l.length;a++)if(h[m].NAME.woPunct()==l[a][0].woPunct()&&h[m].TYPE==l[a][1]){w=!0;break}e=w}if(0<u.length&&null!=h[m].CATEGORIES){w=!1;for(a=0;a<u.length;a++)if(-1<h[m].CATEGORIES.indexOf(u[a])){w=
!0;break}C=w}if(t)for(w=!1,a=0;a<p.length;a++){if(h[m].SUMMARY)for(var A=0;A<h[m].SUMMARY.length;A++)if(-1<h[m].SUMMARY[A].toLowerCase().indexOf(p[a].toLowerCase())){cardMatchesFullText=w=!0;break}if(w)break;if(h[m].HELD)for(A=0;A<h[m].HELD.length;A++)if(-1<h[m].HELD[A].toLowerCase().indexOf(p[a])){cardMatchesFullText=w=!0;break}if(h[m].COMMENT&&-1<h[m].COMMENT.toLowerCase().indexOf(p[a])){cardMatchesFullText=!0;break}if(w)break}if(!(t&&!cardMatchesFullText||y&&!e&&!C)){e=!0;if(0<b.length){var D=
E[h[m].NUMBER];if(null==D||0==D.length)continue;for(a=0;a<b.length;a++)-1<D.indexOf(b[a])&&(e=!1);if(e)continue}if(0<g.length){C=null==h[m].TYPE?"Case":h[m].TYPE;for(a=0;a<g.length;a++)C==g[a]&&(e=!1);if(e)continue}if(0<x.length){if(null==h[m].COURT)continue;for(a=0;a<x.length;a++)h[m].COURT==x[a]&&(e=!1);if(e)continue}f.push(parseInt(h[m].NUMBER))}}r||"random"==Na?f=I(f):"natural-desc"==Na&&f.reverse();0<f.length&&null!=F&&""!=F&&f.unshift("results-"+F)}D=E;G={};cardsDrawn=0;b=-1<k;for(g=f.length-
1;0<=g;g--)g>=B.length&&0==g%B.length&&(B=I(B)),x=f[g],G[x]=$a(x,g,b,d,D[x],c,F),b||(k+=1),cardsDrawn+=1;localStorage.setItem(subject+"-cardIds",JSON.stringify(f));localStorage.setItem(subject+"-tos",k);fb();oc()}function lb(a){var b='<div class="source-search src-front">',d=!1;if(null!=h[a].TYPE&&"Case"==h[a].TYPE&&null==h[a].CASENUM){var c=h[a].NAME;null!=h[a].YEAR&&(c+=" ("+h[a].YEAR+")");if(null!=h[a].CIT)c=h[a].CIT;else if(null!=h[a].CITATION){var e=h[a].CITATION,f=e.indexOf("[");-1==f&&(f=e.indexOf("("));
-1<f&&f<e.length-1&&!e.endsWith("]")&&!e.endsWith(")")&&(c=e=e.substr(f))}else null!=h[a].CITATION&&-1<h[a].CITATION.indexOf("[")&&(c=h[a].CITATION.substr(0,h[a].CITATION.indexOf("[")-1)),null!=h[a].CITATION&&-1<h[a].CITATION.indexOf("(")&&(c=h[a].CITATION.substr(0,h[a].CITATION.indexOf("(")-1));c='"'+c+'"';yb&&(f="http://login.westlaw.co.uk/maf/wluk/app/search/run?ao=&ndd=&sttype=stdtemplate&srguid=&context=19&crumb-action=append&crumb-label=Search+Results&sortid=order-by-element-relevance&journal_ds=uk-journals-idsall&frt="+
encodeURIComponent(c)+"&buttonSearch=Search&ds1=uk-topics&ds2=uk-cases-all&ds3=uk-leg-today&ds4=uk-journals-all&ds5=ukca&ds6=uk-eu-all&searchtype=fulltext",b+='<a class="lnk srcln"  target="_blank" href="'+f+'">Show on Westlaw</a>',d=!0)}null!=h[a].CASENUM&&(f="http://curia.europa.eu/juris/liste.jsf?td=ALL&language=en&jur=C,T,F&num="+h[a].CASENUM+"",b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+f+'">On curia.eu</a>',d=!0);null!=h[a].TYPE&&"Case"==h[a].TYPE&&zb&&(f="https://scholar.google.co.uk/scholar?q="+
encodeURIComponent(c)+"&btnG=&hl=en&as_sdt=0%2C5",b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+f+'">Google Scholar</a>',d=!0);if(null!=h[a].LEGILINK)for(f=0;f<h[a].LEGILINK.length;f++)b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+h[a].LEGILINK[f]+'">On legislation.gov.uk</a>',d=!0;if(null!=h[a].EUROPALINK)for(f=0;f<h[a].EUROPALINK.length;f++)e=h[a].EUROPALINK[f],c=e.startsWith("http")?e:e.substr(e.indexOf("http")),e=e.startsWith("http")?"":" - "+e.substr(0,e.indexOf("http")-
1),b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+c+'">On europa.eu'+e+"</a>",d=!0;if(null!=h[a].WIKILINK)for(f=0;f<h[a].WIKILINK.length;f++)e=h[a].WIKILINK[f],c=e.startsWith("http")?e:e.substr(e.indexOf("http")),e=e.startsWith("http")?"":" - "+e.substr(0,e.indexOf("http")-1),b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+c+'">Wikipedia'+e+"</a>",d=!0;if(null!=h[a].LINK)for(f=0;f<h[a].LINK.length;f++)e=h[a].LINK[f],-1<e.indexOf("[local]")?(c=e.substr(e.indexOf("[local]")+
7),e=e.substr(0,e.indexOf("[local]")-1)):(c=e.startsWith("http")?e:e.substr(e.indexOf("http")),e=e.substr(0,e.indexOf("http")-1)),b+=(d?"<br>":"")+'<a class="lnk srcln"  target="_blank" href="'+c+'">'+e+"</a>",d=!0;return d?b+"</div>":""}function $a(a,b,d,c,e,f,g){d="";null!=H[a]?d=H[a]:(d=B[b%B.length],H[a]=d);f="";0<P&&(f+="width: "+y+"; height: "+A+"; transform: rotate("+P/2.1*((Ab/2-Math.random()*Ab)/6)+"rad);");var k='style="transform-origin: '+(Math.floor(parseInt(y)/2)+10)+'px;"',u=2+P/15+
Math.floor(.9*Math.random()*P),l=5.5+Math.floor(.9*Math.random()*P),u=Bb+Math.floor(u/100*ua)+"px",l=Math.floor(l/100*ba)+"px";b="<div id='outer-container-"+a+"' class='browser-default outer-container"+(d in va&&!va[d]?" dark":"")+"' "+("style='z-index: "+(b+1)+"; top: "+u+"; left: "+l+"; '")+" ><div id='card-container-"+a+"' class='card-container' style='"+f+"'> <div id='flip-"+a+"' class='flip'"+k+"> ";if(null==g)b+=(c?vb(a,"front",e):ob(a,"front",e))+(c?ob(a,"back",e):vb(a,"back",e));else if("string"==
typeof a&&a.startsWith("results-"))c="<div class='front fcard' id='front-"+a+"' style='background-image: url("+currentTexture+"); visible: hidden; height: "+A+"; width: "+y+";' >",c+="<div class='details-title test'><span>Test Results</span></div></div>",b+=c+("<div class='back fcard' id='back-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >");else if("ffb"==g){c=b;e="<div class='front fcard' id='front-"+a+"' style='background-image: url("+currentTexture+"); height: "+
A+"; width: "+y+";' >";card=h[a];null!=card.CATEGORY&&wa&&(e+="<div class='details-title test'><span>"+card.CATEGORY+"</span></div>");if(null!=card.HELD&&0<card.HELD.length){e+="<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+card.HELD[0]+"</p>";if(Oa)for(g=1;g<card.HELD.length;g++)e+="<p>"+card.HELD[g]+"</p>";e+="</div>"}else if(null!=card.SUMMARY&&0<card.SUMMARY.length){e+="<div class='details-facts'><p><span class='bd'>Held</span> &mdash; "+card.SUMMARY[0]+"</p>";for(g=1;g<
card.SUMMARY.length;g++)e+="<p>"+card.SUMMARY[g]+"</p>";e+="</div>"}g=I(pb(8,card.NAME,a));e+="<div class='test-answer-table'><span class='test-answer-title'>Which case?</span><table class='test-table' data-correct=\""+card.NAME+"\"><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-num='0' class='test-answer blurry-text'>"+g[0]+"</td><td class='tdright'><span data-cardnum='"+a+"' data-num='1' class='test-answer blurry-text'>"+g[1]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-num='2' class='test-answer blurry-text'>"+
g[2]+"</td><td class='tdright'><span data-cardnum='"+a+"' data-num='3' class='test-answer blurry-text'>"+g[3]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-num='4' class='test-answer blurry-text'>"+g[4]+"</td><td class='tdright'><span data-cardnum='"+a+"' data-num='5' class='test-answer blurry-text'>"+g[5]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-num='6' class='test-answer blurry-text'>"+g[6]+"</td><td class='tdright'><span data-cardnum='"+a+"' data-num='7' class='test-answer blurry-text'>"+
g[7]+"</td></tr></table></div>";e+="</div>";g="<div class='back fcard' id='back-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >";g+="<div class='label-correct'><span class='correct-text'>Correct</span></div><div class='label-wrong'><span class='wrong-text'>Wrong</span></div>";g+="<div class='case-name'>";card=h[a];null!=card.CITATION?g+="<span class='case-name-citation'>"+card.CITATION+"</span>":(null!=card.NAME&&(g+="<span class='case-name-name'>"+card.NAME+
"</span>"),null!=card.YEAR&&(g+="<span class='case-name-year'> ["+card.YEAR+"]</span>"),null!=card.COURT&&(g+="<span class='case-name-court'> "+card.COURT+"</span>"));g+="</div>";if(null!=card.SUMMARY&&0<card.SUMMARY.length){g+="<div class='details-facts'>";for(a=0;a<card.SUMMARY.length;a++)g+="<p>"+card.SUMMARY[a]+"</p>";g+="</div>"}if(null!=card.HELD&&0<card.HELD.length){g+="<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+card.HELD[0]+"</p>";for(a=1;a<card.HELD.length;a++)g+=
"<p>"+card.HELD[a]+"</p>";g+="</div>"}null!=card.COMMENT&&(g+="<div class='details-held'><span class='bd'>Comment</span> &mdash; "+card.COMMENT+"</div>");null!=card.TRIVIA&&(g+="<div class='details-trivia'><span class='bd'>Trivia</span> &mdash; "+card.TRIVIA+"</div>");g+="</div>";b=c+(e+g)}else if("bff"==g){c=b;e="<div class='front fcard' id='front-"+a+"' style='height: "+A+"; width: "+y+";' >";g=h[a];null!=g.CATEGORY&&wa&&(e+="<div class='details-title test'><span>"+g.CATEGORY+"</span></div>");e+=
"<div class='case-name'>";null!=g.NAME&&(e+="<span class='case-name-name'>"+g.NAME+"</span>");null!=g.YEAR&&(e+="<span class='case-name-year'> ["+g.YEAR+"]</span>");null!=g.COURT&&(e+="<span class='case-name-court'> "+g.COURT+"</span>");e+="</div>";b=pb(8,g.NAME,g.NUMBER);f=[];for(k=0;k<b.length;k++)u=N[b[k].toLowerCase().woPunct()],l="",u&&null!=h[u]&&null!=h[u].HELD&&(l=h[u].HELD[0]),f.push([b[k],l]);b=I(f);8==b.length&&(e+="<div class='test-answer-table'><span class='test-answer-title'>What was held?</span><table class='test-table test-table-ffb' data-correct=\""+
g.NAME+"\"><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[0][0]+"' data-num='0' class='test-answer blurry-text'>"+b[0][1]+"</td><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[1][0]+"' data-num='1' class='test-answer blurry-text'>"+b[1][1]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[2][0]+"' data-num='2' class='test-answer blurry-text'>"+b[2][1]+"</td><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[3][0]+
"' data-num='3' class='test-answer blurry-text'>"+b[3][1]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[4][0]+"' data-num='4' class='test-answer blurry-text'>"+b[4][1]+"</td><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[5][0]+"' data-num='5' class='test-answer blurry-text'>"+b[5][1]+"</td></tr><tr><td class='tdleft' ><span data-cardnum='"+a+"' data-cardname='"+b[6][0]+"' data-num='6' class='test-answer blurry-text'>"+b[6][1]+"</td><td class='tdleft' ><span data-cardnum='"+
a+"' data-cardname='"+b[7][0]+"' data-num='7' class='test-answer blurry-text'>"+b[7][1]+"</td></tr></table></div>");e+="</div>";g="<div class='back fcard' id='back-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >";g+="<div class='label-correct'><span class='correct-text'>Correct</span></div><div class='label-wrong'><span class='wrong-text'>Wrong</span></div>";a=h[a];g+="<div class='case-name'>";null!=a.CITATION?g+="<span class='case-name-citation'>"+a.CITATION+
"</span>":(null!=a.NAME&&(g+="<span class='case-name-name'>"+a.NAME+"</span>"),null!=a.YEAR&&(g+="<span class='case-name-year'> &nbsp; ["+a.YEAR+"]</span>"),null!=a.COURT&&(g+="<span class='case-name-court'>&nbsp; "+a.COURT+"</span>"));g+="</div>";null!=a.CATEGORY&&(g+="<div class='details-title test'><span>"+a.CATEGORY+"</span></div>");if(null!=a.HELD&&0<a.HELD.length){g+="<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+a.HELD[0]+"</p>";for(b=1;b<a.HELD.length;b++)g+="<p>"+a.HELD[b]+
"</p>";g+="</div>"}if(null!=a.SUMMARY&&0<a.SUMMARY.length){g+="<div class='details-facts'>";for(b=0;b<a.SUMMARY.length;b++)g+="<p>"+a.SUMMARY[b]+"</p>";g+="</div>"}g+="</div>";b=c+(e+g)}else if("cnt"==g){c="<div class='front fcard' id='front-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+"; overflow: visible;' >";card=h[a];null!=card.CATEGORY&&wa&&(c+="<div class='details-title test'><span>"+card.CATEGORY+"</span></div>");if(null!=card.HELD&&0<card.HELD.length){c+=
"<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+card.HELD[0]+"</p>";if(Oa)for(e=1;e<card.HELD.length;e++)c+="<p>"+card.HELD[e]+"</p>";c+="</div>"}else if(null!=card.SUMMARY&&0<card.SUMMARY.length){c+="<div class='details-facts'><p><span class='bd'>Held</span> &mdash; "+card.SUMMARY[0]+"</p>";for(e=1;e<card.SUMMARY.length;e++)c+="<p>"+card.SUMMARY[e]+"</p>";c+="</div>"}c+='<div class="cnt-input-wrapper sans"><input class="cnt-case-input" placeholder="Case name..."></div></div>';
e="<div class='back fcard' id='back-"+a+"' style='background-image: url("+currentTexture+"); height: "+A+"; width: "+y+";' >";e+="<div class='label-correct'><span class='correct-text'>Correct</span></div><div class='label-wrong'><span class='wrong-text'>Wrong</span></div>";e+="<div class='case-name'>";card=h[a];null!=card.CITATION?e+="<span class='case-name-citation'>"+card.CITATION+"</span>":(null!=card.NAME&&(e+="<span class='case-name-name'>"+card.NAME+"</span>"),null!=card.YEAR&&(e+="<span class='case-name-year'> ["+
card.YEAR+"]</span>"),null!=card.COURT&&(e+="<span class='case-name-court'> "+card.COURT+"</span>"));e+="</div>";if(null!=card.SUMMARY&&0<card.SUMMARY.length){e+="<div class='details-facts'>";for(a=0;a<card.SUMMARY.length;a++)e+="<p>"+card.SUMMARY[a]+"</p>";e+="</div>"}if(null!=card.HELD&&0<card.HELD.length){e+="<div class='details-held'><p><span class='bd'>Held</span> &mdash; "+card.HELD[0]+"</p>";for(a=1;a<card.HELD.length;a++)e+="<p>"+card.HELD[a]+"</p>";e+="</div>"}null!=card.COMMENT&&(e+="<div class='details-held'><span class='bd'>Comment</span> &mdash; "+
card.COMMENT+"</div>");null!=card.TRIVIA&&(e+="<div class='details-trivia'><span class='bd'>Trivia</span> &mdash; "+card.TRIVIA+"</div>");e+="</div>";b+=c+e}return{html:b+"</div></div></div>",colour:d}}function Zb(a,b){ha=1;ca=!0;Pa=b;ka=ja=U=T=9;la=1200;ya=1700;za=.2;Cb(a);Db(a)}function Eb(){zIndex=1;for(var a=M;a<=k;a++)zIndex+=1,$("#outer-container-"+f[a]).css("z-index",zIndex);a=$("#outer-container-"+f[k])[0].offsetHeight;console.info("zi: "+a)}function Ca(a,b){var d="#flip-"+a;$(d).attr("class");
$(d).velocity({rotateY:b?"180deg":"0deg"},{duration:"0ms"})}function Db(a){var b=0>U;U=Math.floor(ka/3*2+ka/3*Math.random());b||(U=0-U);$(a).velocity({translateY:U},{easing:"ease",duration:ya,queue:!1,complete:function(){Db(a)}})}function Cb(a){var b=0>T;T=Math.floor(ja/3*2+ja/3*Math.random());b||(T=0-T);ha-=za;.02>ha?(ca=!1,$(a).velocity("stop"),-1<Pa?(b=f[k],a="#outer-container-"+b,f.splice(f.indexOf(b),1),f.splice(Pa,0,b),$(a).remove(),$(G[b].html).hide().appendTo("#page").fadeIn(600).show(),$("#flip-"+
b+" .fcard").css("background-color","#"+G[b].colour),$("#flip-"+b+" .fcard").css("opacity","0.985")):($(a).remove(),f.splice(k,1),--k),Eb(),D()):$(a).velocity({translateX:T,opacity:ha},{easing:"ease",duration:la,queue:!1,complete:function(){ca?Cb(a):($(a).velocity({translateX:0,translateY:0,translateZ:0,opacity:1},{queue:!1,duration:la/2}),$(a).css("cursor","default"),0!=k&&Ca(f[k-1],!1),D(),Eb())}})}function oc(){if(0==f.length)D();else{var a=0;f.length>da&&(k==f.length-1&&(a=f.length-da-1),k>da&&
(a=k-da));for(M=a;a<f.length&&a<=k;a++){var b=f[a];$("#page").append(G[b].html);$("#flip-"+b+" .fcard").css("background-color","#"+G[b].colour);$("#flip-"+b+" .fcard").css("opacity","0.985");"string"==typeof b&&b.startsWith("results-")&&$("#outer-container-"+b).hide()}r||(Ea(),ma());r&&setTimeout(function(){$("#front-"+f[k]+" .test-answer-table td span").removeClass("blurry-text")},1E3*Ha);D();null!=z&&("ffb"==z&&$(".test-answer").click(Ua),"bff"==z&&$(".test-answer").click(Va),"cnt"==z&&(Fb&&$(".cnt-case-input").typeahead({hint:!0,
highlight:!0,minLength:1},{name:"cardNames",source:Wb(Y),limit:20}),$(".cnt-case-input").keyup(Wa)));kb(f[k]);r?K(f[k],L?"back":"front",".test-answer, .case-name, .details-title, .details-held"):K(f[k],L?"back":"front",".case-name-container, .intro-special");Ba()}}function Da(a,b){var d=f[k];null==document.getElementById("outer-container-"+d)&&($("#page").append(G[d].html),$("#flip-"+d+" .fcard").css("background-color","#"+G[d].colour),$("#flip-"+d+" .fcard").css("opacity","0.985"),null!=a&&$("#outer-container-"+
d).css("z-index",a),r?K(f[k],L?"back":"front",".test-answer, .case-name, .details-held"):K(f[k],L?"back":"front",".case-name-container,  .intro-special"),Ea(),null!=b&&b&&(Ca(d,!1),q=!0))}function p(){Ma($(".tokenize-sample").tokenize().toArray(),ta(),$("#reversed-cards-control").is(":checked"),!1,-1,null)}function Gb(){k=null==localStorage.getItem(subject+"-tos")?-1:parseInt(localStorage.getItem(subject+"-tos"));f=null==localStorage.getItem(subject+"-cardIds")?[]:JSON.parse(localStorage.getItem(subject+
"-cardIds"));0<f.length&&"string"==typeof f[0]&&f[0].startsWith("results-")&&(f.splice(0,1),--k);Ma($(".tokenize-sample").tokenize().toArray(),ta(),$("#reversed-cards-control").is(":checked"),$("#neat-cards-control").is(":checked"),k,null);Hb=!0}function ta(){var a=localStorage.getItem(J);return E=null==a?{}:JSON.parse(a)}function wb(a,b){var d=localStorage.getItem(J);E=null==d?{}:JSON.parse(d);null==E[a]?E[a]=[b]:-1==E[a].indexOf(b)&&E[a].push(b);localStorage.setItem(J,JSON.stringify(E));return E[a]}
function Xb(){ic();r=!1;var a=Math.floor(100*C.length/(f.length-1)),b="FAIL";40<a&&(b="PASS");60<a&&(b="COMMENDATION");60<a&&(b="DISTINCTION");a='<div id="test-results-headline">You got '+C.length+" of "+(f.length-1)+" ("+a+"% - "+b+")</div>";a+='<div id="test-results-breakdown"></div><a class="btn-new" id="end-test-button">End test</a>';a+='<a class="btn-new" id="tag-cards-button">Tag the cards I got wrong</a>';$("#front-"+f[k]).append(a);$("#end-test-button").click(function(){na();p();ra()});$("#tag-cards-button").click(function(){var a=
new Date,a="Wrong "+a.getDay()+"-"+pc[a.getMonth()];jb(a);for(id in qa)wb(id,a)})}function Qa(a){na();Ha=parseInt($("#ans-show-delay").val());parseInt($("#ans-wrong-delay").val());Oa=$("#test-all-held").is(":checked");wa=$("#test-show-cats").is(":checked");Fb=$("#test-cnt-sug").is(":checked");r=!0;z=a;var b=$(".tokenize-sample").tokenize().toArray();-1==$("#tokenizer").tokenize().toArray().indexOf("Type: Case")&&($("#tokenizer").tokenize().tokenAdd("Type: Case"),b.push("Type: Case"),localStorage.setItem(subject+
"-searchtokens",JSON.stringify(b)));Ma(b,ta(),!1,!1,-1,a)}function D(){var a=30>parseInt($("#number-circle").css("top"));if(r){var b="",b=a?'<span class="label-correct">'+C.length+"</span> ("+(f.length-k)+" of "+(f.length-1)+")":'Score:&nbsp;<span class="correct-text">'+C.length+"</span>&nbsp;("+(0==k?f.length-1:f.length-k)+"&nbsp;of&nbsp;"+(f.length-1)+")";$("#number-circle .inner").html(b)}else 0==f.length?$("#number-circle .inner").html("No matches!"):$("#number-circle .inner").html(""+(f.length-
k).toString()+" of "+f.length)}function Z(a,b,d,c,e){null!=localStorage.getItem(b)?(Aa('setupPersistentSelect - (value existed for property "'+b+'") - setting #"'+a+'" to "'+localStorage.getItem(b)+'".'),$("#"+a).val(localStorage.getItem(b))):$("#"+a).val(e);$("#"+a).change(function(){var a=$(this);localStorage.setItem(b,a.val());c&&($("#show-button").removeClass("btn-active"),$("#options-cd-panel").removeClass("is-visible"));null!=d&&setTimeout(d,300)})}function Ib(a,b,d,c,e,f){null!=localStorage.getItem(b)?
(Aa('setupPersistentSlider - (value existed for property "'+b+'") - setting #"'+a+'" to "'+localStorage.getItem(b)+'".'),$("#"+a).val(localStorage.getItem(b))):$("#"+a).val(e);$("#"+a).change(function(){var a=$(this),e=a.val();localStorage.setItem(b,e);c&&($("#show-button").removeClass("btn-active"),$("#options-cd-panel").removeClass("is-visible"));null!=f&&e in f&&a.parent().find("span.value").html(f[a.val()]);null!=d&&setTimeout(d,300)})}function l(a,b,d,c,e){null!=localStorage.getItem(b)?$("#"+
a).prop("checked","true"==localStorage.getItem(b)):$("#"+a).prop("checked",e);$("#"+a).click(function(){var a=$(this);localStorage.setItem(b,a.is(":checked"));c&&($("#show-button").removeClass("btn-active"),$("#options-cd-panel").removeClass("is-visible"));null!=d&&setTimeout(d,50)})}function Jb(a){var b="",d="";if(-1<a.indexOf(": ")){var c=a.substr(a.indexOf(": ")+2),d=a.substr(0,a.indexOf(": "));a="dd dd-"+d.toLowerCase().replace(" ","-");b+='<span class="'+a+'"></span>'+c;"Tagged"==d&&2==c.length&&
(b+='&nbsp;&nbsp;<span class="flag-icon-background flag-icon-'+c.toLowerCase()+'" style="color: rgba(0,0,0,0); border-radius:20px;">FLAG</span>')}return b}function qc(a){a=a.split(" ");for(var b=0;b<a.length;b++)a[b]=a[b][0].toUpperCase()+a[b].slice(1);return a.join(" ")}function rc(){var a;a='<option value="(No Ignored Cards)">No cards tagged "ignore"</option><option value="Seen: Last ten mins">Seen in last ten mins</option>';a+='<option value="Seen: Last half hour">Seen in last half hour</option>';
a+='<option value="Seen: Last hour">Seen in last hour</option>';a+='<option value="Seen: Last three hours">Seen in last three hours</option>';a+='<option value="Seen: Today">Seen today</option>';a+='<option value="Seen: Yesterday">Seen yesterday</option>';for(var b=0;b<W.length;b++)a+='<option value="Type: '+W[b]+'">Type: '+W[b]+"</option>";for(b=0;b<t.length;b++)"Ignore"!=t[b]&&(a+='<option value="Tagged: '+t[b]+'">Tagged: '+t[b]+"</option>");for(b=0;b<xa.length;b++)a+='<option value="Category: '+
xa[b]+'">'+xa[b]+"</option>";for(b=0;b<cardsLen;b++)a+='<option value="'+qc(h[b].TYPE)+": "+h[b].NAME+'">'+h[b].NAME+"</option>";$("#tokenizer").append(a);$("#tokenizer").tokenize({autosize:!0,hasSearchButton:!0,searchOnSelect:!0,nbDropdownElements:300,maxDropdownHeight:""+Math.abs(5*ua/7)+"px",placeholder:"Cases, categories...",onDrawDropdownItem:Jb,onFormatToken:Jb,onPressEnterOrClickSearch:function(){if(""==z||confirm("This will end (and forget) the test in progress. Sure?"))localStorage.setItem(subject+
"-searchtokens",JSON.stringify($("#tokenizer").tokenize().toArray())),na(),p()}});b=localStorage.getItem(subject+"-searchtokens");if(null!=b)for(a=JSON.parse(b),b=0;b<a.length;b++)$("#tokenizer").tokenize().tokenAdd(a[b],a[b])}function Kb(a){var b=$("#colouring-select").val();if("random"==b)H={};else if("subject"==b){for(var b={},d=0;d<cardsLen;d++)null!=h[d].CATEGORIES&&0<h[d].CATEGORIES.length&&(h[d].CATEGORIES[0]in b?b[h[d].CATEGORIES[0]].push(d):b[h[d].CATEGORIES[0]]=[d]);for(var c=[],c=c.concat(B),
c=I(c),e=Object.keys(b);c.length<e.length;)c=c.concat(I(c));H={};for(d=0;d<e.length;d++)for(var f=b[e[d]],g=0;g<f.length;g++)H[f[g]]=c[d]}else if("type"==b){b=[];b=b.concat(B);for(b=I(b);b.length<W.length;)b=b.concat(I(b));d={};for(c=0;c<W.length;c++)d[W[c]]=b[c];H={};for(c=0;c<cardsLen;c++)H[c]=d[h[c].TYPE]}fb(!0);a&&p()}function Lb(){Kb(!0)}function sc(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=b||0;var d="",c,e;for(e=0;3>e;e++)c=parseInt(a.substr(2*
e,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),d+=("00"+c).substr(c.length);return d}function Mb(a,b){var d=$("#dark-bg-control").is(":checked");switch(parseInt(a-1)){case 6:B=pastels6;break;case 5:B=tc;break;case 4:B=uc;break;case 3:B=vc;break;case 2:B=wc;break;case 1:B=xc;break;case 0:B=Nb}for(var c=[],e=0;e<B.length;e++)c.push(sc(B[e],d?-.5:.25));d=B=c;va={};c=d.length;for(e=0;e<c;e++){var f=d[e],g=parseInt("0x"+f.substr(0,2)),h=parseInt("0x"+f.substr(2,2)),k=parseInt("0x"+
f.substr(4,2));va[f]=45<=100*Math.sqrt((g*g*241+h*h*691+k*k*68)/1E3)/255}b&&Lb()}function Ob(){$("#colour-scheme-select").val();Mb($("#colour-scheme-select").val(),!0)}function Pb(){var a=$("#card-bg-texture-select").val();a&&0<a.length&&(currentTexture=a)}function yc(){Pb();$(".fcard").css("background-image","url("+currentTexture+")")}function zc(){Ra();p()}function Ac(){$("#toc-button").click(function(){$("#toc-cd-panel").hasClass("is-visible")?($("#toc-button-wrapper").velocity({translateY:"0px"},
{duration:400,easing:"ease",queue:!1}),$("#show-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:1,opacity:1},{duration:300,easing:"ease",queue:!1})):($("#toc-button-wrapper").velocity({translateY:"-38px"},{duration:400,easing:"ease"}),$("#show-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:.05,opacity:0},{duration:300,easing:"ease",queue:!1}));$("#toc-button").toggleClass("btn-active");$("#toc-cd-panel").toggleClass("is-visible")});
$("#toc-cd-panel").on("click",function(a){if($(event.target).is("#toc-cd-panel")||$(event.target).is("#toc-cd-panel-close"))$("#toc-cd-panel").removeClass("is-visible"),$("#toc-button").removeClass("btn-active"),$("#toc-button-wrapper").velocity({translateY:"0px"},{duration:400,easing:"ease"}),$("#show-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:1,opacity:1},{duration:300,easing:"ease",queue:!1}),a.preventDefault()})}function Ba(a){var b=".back";null!=a&&
(b=a);(Bc=$("#no-body-bold").is(":checked"))?$(b+" * .bd").addClass("no-bd"):$(b+" * .bd").removeClass("no-bd")}function Qb(){$("#toc-show-ratios").is(":checked")?Rb?$(".toc-ratio").slideDown(200):($(".toc-ln .lnk").each(function(){if($(this).attr("data-st")&&"Case"==$(this).attr("data-st")){var a=$(this).text().toLowerCase().woPunct();a in N&&N[a]in h&&"HELD"in h[N[a]]&&0<h[N[a]].HELD.length&&(a=h[N[a]].HELD[0],0==a.length&&(a=" "),$(this).closest("li").append('<div class="toc-ratio">'+a.capitalizeFirstLetter()+
"</div>"))}}),Rb=!0):$(".toc-ratio").slideUp(200)}function Sb(){$("#dark-bg-control").is(":checked")?$("body").addClass("bg-dark"):$("body").removeClass("bg-dark");Ob()}function Cc(){$("#show-button").click(function(){$("#options-cd-panel").hasClass("is-visible")?($("#show-button-wrapper").velocity({rotateZ:"0deg"},{duration:400,easing:"ease"}),$("#toc-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:1,opacity:1},{duration:300,easing:"ease"})):($("#show-button-wrapper").velocity({rotateZ:"-360deg"},
{duration:400,easing:"ease"}),$("#toc-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:.05,opacity:0},{duration:300,easing:"ease"}));$("#show-button").toggleClass("btn-active");$("#options-cd-panel").toggleClass("is-visible")});$("#options-cd-panel").on("click",function(a){if($(a.target).is("#options-cd-panel")||$(a.target).is("#options-cd-panel-close"))$("#options-cd-panel").removeClass("is-visible"),$("#show-button").removeClass("btn-active"),$("#show-button-wrapper").velocity({rotateZ:"0deg"},
{duration:400,easing:"ease"}),$("#toc-button-wrapper, #otherSubjects, #testDropdown, #print-button-wrapper").velocity({scale:1,opacity:1},{duration:300,easing:"ease"}),a.preventDefault()});l("serif-font-control","property-"+subject+"-serif-font",xb,!1,!0);l("neat-cards-control","property-"+subject+"-neat",p,!1,!1);l("no-body-bold","property-"+subject+"-no-body-bold",Ba,!1,!1);l("dark-bg-control","property-"+subject+"-dark-bg",Sb,!1,"undefined"!=typeof darktheme&&darktheme);l("larger-font-control",
"property-"+subject+"-larger-font",p,!1,!0);Z("messiness-control","property-"+subject+"-messiness",zc,!1,"5");Z("colouring-select","property-"+subject+"-colouring",Lb,!1,"random");Z("colour-scheme-select","property-"+subject+"-colour-scheme",Ob,!1,defcols);Z("card-bg-texture-select","property-"+subject+"-bg-texture",yc,!1,currentTexture);l("westlaw-control","property-"+subject+"-westlaw",p,!1,!0);l("googschol-control","property-"+subject+"-googschol",p,!1,!0);l("journals-westlaw-control","property-"+
subject+"-journals-westlaw",p,!1,!1);Z("card-order-select","property-"+subject+"-card-order",p,!1,"natural");l("reversed-cards-control","property-"+subject+"-reversed",p,!1,!1);l("claire-mode-control","property-"+subject+"-claire-mode",p,!1,!1);l("carran-mode-control","property-"+subject+"-carran-mode",p,!1,!1);l("front-categories-control","property-"+subject+"-front-categories",p,!1,!1);l("citations-control","property-"+subject+"-citations",p,!1,!1);l("front-panos-mode","property-"+subject+"-front-panos-mode",
p,!1,!1);l("back-categories-control","property-"+subject+"-back-categories",p,!1,!0);l("back-links-control","property-"+subject+"-back-links",p,!1,!0);l("browsing-show-facts","property-"+subject+"-browsing-show-facts",p,!1,!0);l("browsing-show-shortheld","property-"+subject+"-browsing-show-shortheld",p,!1,!1);l("browsing-show-name-on-back","property-"+subject+"-browsing-show-name-on-back",p,!1,!1);l("back-panos-mode","property-"+subject+"-back-panos-mode",p,!1,!1);$("#colouring-select, #colour-scheme-select, #card-order-select, #card-bg-texture-select").material_select();
"undefined"==typeof panosModeEnabled&&$(".panos-mode-control").hide();"undefined"==typeof enableClaireAndCarranMode&&$(".claire-and-carran-mode").css("display","none");enableTests?(l("test-only-related","property-"+subject+"-tst-only-related",null,!0,!0),Ib("ans-show-delay","property-"+subject+"-tst-ans-show-delay",null,!1,"1",{0:"No delay"}),Ib("ans-wrong-delay","property-"+subject+"-tst-ans-wrong-delay",null,!1,"30",{0:"Indefinitely"}),l("test-all-held","property-"+subject+"-tst-all-held",null,
!1,!1),l("test-show-cats","property-"+subject+"-tst-show-cats",null,!1,!0),l("test-cnt-sug","property-"+subject+"-tst-cnt-sug",null,!1,!1),$("#ffbTest").click(function(){Qa("ffb",!0)}),$("#bffTest").click(function(){Qa("bff",!0)}),$("#cntTest").click(function(){Qa("cnt",!1)})):$("#testDropdown").hide();$("footer").append('<div class="browser-default" style="float: left; position: absolute; left: 1px; bottom:1px; cursor:pointer; font-size:8px;"><a class="browser-default" style="color: rgba(0,0,0,0.1);" id="removeAllUserData">Remove all user data and reload</a></div>');
$("#removeAllUserData").click(function(){Tb(!0);for(n in localStorage){var a=localStorage.getItem(n);null!=a&&(10>a.length||a.substr(0,9))}confirm("This will trash all local settings, etc...")&&location.reload()});l("toc-show-ratios","property-"+subject+"-toc-show-ratios",Qb,!1,!1);Qb()}function Dc(){Y=[];for(var a=0;a<cardsLen;a++)null==h[a].NAME||""==h[a].NAME||null!=h[a].TYPE&&"Case"!=h[a].TYPE||Y.push(h[a].NAME)}function Ec(a){showingBackWhenTouchStarted=q;$(".flag-tray").css("z-index","-1");
$(".Tokenize").css("z-index","-100");$(".Tokenize")[0].scrollHeight;originalCoord.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;originalCoord.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY;finalCoord.x=0;finalCoord.y=0}function Fc(a){finalCoord.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;finalCoord.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY;var b=finalCoord.x-originalCoord.x;
if(Math.abs(b)>2*Math.abs(finalCoord.y-originalCoord.y)){if(7<b){if(0==k&&showingBackWhenTouchStarted)return;if(!showingBackWhenTouchStarted&&!q){var d=b/1.5,c="#flip-"+f[k];50<=d?r||(Q=!0,setTimeout(function(){Q=!1},500),R()):$(c).velocity("stop").velocity({rotateY:""+d+"deg"},{duration:0})}showingBackWhenTouchStarted&&q&&(c="#outer-container-"+f[k],b>$(c).width()/7?r||(Q=!0,setTimeout(function(){Q=!1},500),R()):$(c).velocity("stop").velocity({translateX:""+b+"px"},{duration:0}))}else if(-7>b){if(k==
f.length-1&&!showingBackWhenTouchStarted)return;showingBackWhenTouchStarted&&q&&(d=-b/1.5,c="#flip-"+f[k],50<d?r||(Q=!0,setTimeout(function(){Q=!1},500),Ia()):$(c).velocity("stop").velocity({rotateY:""+(180-d)+"deg"},{duration:0}));!showingBackWhenTouchStarted&&!q&&-b>$(c).width()/7&&!r&&(Q=!0,setTimeout(function(){Q=!1},500),Ia())}a.preventDefault()}}function Gc(a){if(!Q){var b=finalCoord.x-originalCoord.x;Math.abs(b)<Math.abs(1.5*(finalCoord.y-originalCoord.y))&&(b=0);showingBackWhenTouchStarted==
q&&4<Math.abs(b)&&(q&&0<b?(b="#outer-container-"+f[k],$(b).velocity({translateX:0},{duration:"700ms",easing:"spring",queue:!1})):(b="#flip-"+f[k],$(b).velocity({rotateY:q?"180deg":"0deg"},{duration:"700ms",easing:"spring",queue:!1})),a.preventDefault())}}function ma(){var a=f[k];$("#card-container-"+a+" :not(span)").bind("touchstart",Ec);$("#card-container-"+a+" :not(span)").bind("touchmove",Fc);$("#card-container-"+a+" :not(span)").bind("touchend",Gc)}function Ub(a){r?alert("You can't flip cards over while testing."):
Ia(a)}function Vb(a){r&&!q?alert("You can't flip cards over while testing."):R(a)}function Hc(){$("#btn-right").click(function(){Vb(!0)});$("#btn-left").click(function(){Ub(!0)})}function Ra(){P=parseInt($("#messiness-control").val());ba=window.innerWidth;ua=window.innerHeight;Bb=38;y=Math.floor((.89-.88*P/100)*ba)+"px";A=Math.floor((.87-.88*P/100)*ua)+"px"}function Ic(){$(document).keydown(function(a){if(Hb&&"none"==$(".Dropdown").css("display"))switch(a.which){case 37:if(null==z||"cnt"!=z)Ub(!1),
a.preventDefault();break;case 39:if(null==z||"cnt"!=z)Vb(!1),a.preventDefault()}})}function Jc(){$(".otherStuffTop i").velocity({rotateZ:"270deg"},{duration:0});$(".otherStuffTop").parent().css("width","35px !important;");$(".otherStuffTop").css("width","35px !important;");$(".otherStuffTop").parent().find("ul").velocity("fadeOut",{duration:0});$(".otherStuffTop").click(function(a){a.stopPropagation();""!=w&&w!=$(this).attr("id")&&($("#"+w+" i").velocity({rotateZ:"270deg"},{duration:250,easing:"easeInOut",
queue:!1}),$("#"+w).parent().find("ul").velocity("fadeOut",{duration:250,easing:"easeInOut",queue:!1}),$("#"+w).parent().removeClass("hdd"),$("#"+w).removeClass("btn-active"));$(this).toggleClass("btn-active");$(this).parent().find("ul").toggleClass("hdd");$(this).parent().find("ul").velocity($(this).hasClass("btn-active")?"fadeIn":"fadeOut",{duration:250,queue:!1});$(this).parent().toggleClass("hdd");$(this).find("i").velocity({rotateZ:$(this).hasClass("btn-active")?"90deg":"270deg"},{duration:250,
easing:"easeInOut",queue:!1});w=$(this).attr("id")});$(".otherStuffTop").clickOff(function(){""!=w&&($("#"+w+" i").velocity({rotateZ:"270deg"},{duration:250,easing:"easeInOut",queue:!1}),$("#"+w).parent().find("ul").velocity("fadeOut",{duration:250,queue:!1}),$("#"+w).parent().removeClass("hdd"),$("#"+w).removeClass("btn-active"),w="")})}function Kc(){(new Date).getTime();W=eval(atob(cts_));eval(atob(crt_));eval(atob(cnc_));xa=eval(atob(cgs_));hb=eval(atob(pfl_));N=JSON.parse(atob(ntn_));h=eval(atob(cds_));
(new Date).getTime();Ja();Cc();Ra();Ac();rc();null==localStorage.getItem("property-"+subject+"-colour-scheme")&&(Mb(defcols,!1),Kb(!1));Pb();try{Gb()}catch(a){}D();ra();Ic();Jc();Dc();mc();Lc();Hc();Mc();Sb();$("#subjectlink-"+subject).hide();$(".flag-tray").addClass("ft-pinned ft-start");setTimeout(function(){$(".flag-tray").removeClass("ft-pinned ft-start")},1800);setTimeout(function(){$(window).bind("resize",function(){setTimeout(function(){""==z&&(Ra(),Gb())},100)})},500)}function Tb(a){var b=
localStorage.getItem(subject+"-ver");if(a||null==b||parseInt(b)<currentVersion){for(n in localStorage)(n.startsWith(subject+"-")||n.startsWith("property-"+subject+"-"))&&localStorage.removeItem(n);localStorage.setItem(subject+"-ver",currentVersion)}}function Nc(){$.ajaxSetup({cache:!1});try{console.log("checkForNewVersionOnServer - retrieving meta-info.json"),$.ajax({url:"meta-info.json"}).done(function(a){ia="string"==typeof a?JSON.parse(a):a;"version"in ia?currentVersion<ia.version&&console.log("checkForNewVersionOnServer - current version is "+
currentVersion+" &mdash; "+ia.version+" is available"):(console.error("NO VERSION IN METAINFO."),console.error(ia))}).fail(function(){console.error("checkForNewVersionOnServer failed")})}catch(a){console.error("Exception handled in checkForNewVersionOnServer -- ignoring."),console.error(a)}}function Lc(){l("print-font","print-f",null,!1,!1);Z("print-npp","print-npp",null,!1,"3");l("print-loafc","print-loafc",null,!1,!0);$("#btnp").click(function(){localStorage.setItem("print-s",subject);localStorage.setItem("print-npp",
$("#print-npp").val());localStorage.setItem("print-loafc",$("#print-loafc").is(":checked"));var a=window.open("print.html","_blank");a?a.focus():alert("Whoops! To print, you need to allow popups for lawnot.es")})}function Oc(){$.ajaxSetup({cache:!0});$.ajax({url:"sjs/"+subject+".js"}).done(function(a){eval(a);Kc();$(".cssload-loader-walk").css("animation-duration",8E3);$(".cssload-loader-walk").velocity("fadeOut",1E3)})}function Mc(){$(".toc-ct ul").hide();$(".toc-ct").click(function(a){0<$(this).children().length&&
($(this).toggleClass("toc-vis"),$($(this).children()[0]).slideToggle(150));a.stopPropagation()});$(".toc-ln .lnk:not(.catln)").click(function(a){$(this).hasClass("catln")?console.error("element was a catln"):($(this).attr("data-st"),V(a.target.textContent,$(this).attr("data-st"),!0,!0),$("#toc-button").click());a.stopPropagation()});$(".toc-ln .catln, .toc-ln .catln > span").click(function(a){var b=[];a.stopPropagation();$(this).hasClass("catln")?($(this).attr("data-ct"),b=$(this).attr("data-cat").split("; ")):
$(this).hasClass("it")&&$(this).parent().hasClass("catln")?b=$(this).parent().attr("data-cat").split("; "):console.error("Neither .catln nor .catln > span!");if(0<b.length)if(Pc){V(b[0],"Category",!0,!1);for(a=1;a<b.length-1;a++)V(b[a],"Category",!1,!1);V(b[b.length-1],"Category",!1,!0)}else V(b[b.length-1],"Category",!0,!0);$("#toc-button").click()})}var W=[],f=[],xa=[],hb=[],N={},h={},f=[],k=0,M=0,r=!1,z="",aa=!1,ba=1,ua=1,A="68vh",y="72vw";String.prototype.distance=function(a){var b;b=this;var d,
c,e,f,g,h,k,l,p,q,r;b.length>a.length&&(a=[a,b],b=a[0],a=a[1]);f=~~Math.max(0,a.length/2-1);g=[];h=[];c=p=0;for(r=b.length;p<r;c=++p)for(d=b[c],l=Math.max(0,c-f),k=Math.min(c+f+1,a.length),e=q=l;l<=k?q<k:q>k;e=l<=k?++q:--q)if(null==h[e]&&d===a[e]){g[c]=d;h[e]=a[e];break}g=g.join("");h=h.join("");if(e=g.length){c=k=f=0;for(l=g.length;k<l;c=++k)d=g[c],d!==h[c]&&f++;c=h=g=0;for(k=b.length;h<k;c=++h)if(d=b[c],d===a[c])g++;else break;b=(e/b.length+e/a.length+(e-~~(f/2))/e)/3;b+=.1*Math.min(g,4)*(1-b)}else b=
0;return b};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.woPunct=function(){return this.replace(/[^A-Za-z0-9 ]/g,"")};var q=!1,eb=300,Y=[],Nb="FFE5BC DDF9D9 ADD9FE 62A9FF FF9C42 FFFFAA FF9797".split(" "),xc="f5acb0 f5abd5 e7abf5 b2a6f5 abc9f6 acf5ea acf5c5 adf6ac caf5ac f5f1a7 f5caab".split(" "),wc="51574a 447c69 e9d78e f19670 e16552 7c9fb0 5698c4 9abf88".split(" "),vc=["93b4c7","acf0b0","a499ca","f0fabc","bff7f4"],uc=["fff0dd",
"e2b0b2","ac84c6","84a3c6","8bc885"],tc=["e8bdd1","cbb4ce","937f9a","83c4e0","bae9ef"],B=Nb.slice(0),va={},H={},oa=subject+"-card-colours",gb={},E={},J=subject+"-flagged-cards",S=J+"-user",hc=["Key","Leading","Criticised","Overruled","Ignore"],X="green darkgreen brown red darkgrey violet indigo blue darkgreen darkred brown".split(" "),t=[],C=[],qa={},ea=[],sa=!1,O="",ga=function(){return document.addEventListener?function(a,b,d){if(a&&a.nodeName||a===window)a.addEventListener(b,d,!1);else if(a&&a.length)for(var c=
0;c<a.length;c++)ga(a[c],b,d)}:function(a,b,d){if(a&&a.nodeName||a===window)a.attachEvent("on"+b,function(){return d.call(a,window.event)});else if(a&&a.length)for(var c=0;c<a.length;c++)ga(a[c],b,d)}}(),E={},Ka=!1,ub=!1,fa=!0,mb=!1,sb=!1,qb=!0,nb=!1,tb=!0,nc=!1,Xa=!1,rb=!1,Ya=!1,yb=!0,zb=!1,G={},P=5,Ab=.16,Na="natural",Bb=40,ca=!1;ka=ja=U=T=5;la=1E3;ya=1350;za=.15;var ha=1,Pa=-1,da=9,L=!1,pc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ha=0,Oa=!1,wa=!0,Fb=!1,Bc=!0,Rb=!1;originalCoord=
{};finalCoord={};var Q=showingBackWhenTouchStarted=!1,Hb=!1;$.fn.clickOff=function(a){var b=!1,d=this;d.click(function(){b=!0});$(document).click(function(c){b||a(d,c);b=!1})};var w="",ia={},Pc=!1;$(document).ready(function(){Tb(!1);setTimeout(Nc,5);setTimeout(Oc,50)})})();
